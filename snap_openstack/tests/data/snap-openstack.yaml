# Basic test yaml for snap-openstack
setup:
  dirs:
    - "{snap_common}/etc/nova.conf.d"
    - "{snap_common}/etc/nova"
    - "{snap_common}/log"
  templates:
    "nova-snap.conf.j2": "{snap_common}/etc/nova.conf.d/nova-snap.conf"
entry_points:
  nova-manage:
    binary: nova-manage
    config-files:
      - "/etc/nova/nova.conf"
    config-dirs:
      - "/etc/nova/conf.d"
    run-as:
      nova: [nova]
  nova-scheduler:
    type: simple
    binary: nova-scheduler
    config-files:
      - "/etc/nova/nova.conf"
    config-dirs:
      - "/etc/nova/conf.d"
    log-file: "/var/log/nova/scheduler.log"
    run-as:
      nova: [nova]
  keystone-uwsgi:
    type: uwsgi
    uwsgi-dir: "/etc/uwsgi"
    uwsgi-log: "/var/log/uwsgi/keystone.log"
    config-files:
      - "/etc/keystone/keystone.conf"
    config-dirs:
      - "/etc/keystone/conf.d"
    log-file: "/var/log/keystone/keystone.log"
    templates:
      "admin.ini.j2": "/etc/uwsgi/admin.ini"
  keystone-nginx:
    type: nginx
    config-file: "/etc/nginx/keystone/nginx.conf"
    run-as:
      nova: [nova]
  nova-broken:
    type: unknown
    binary: nova-broken
    run-as:
      nova: [nova]
